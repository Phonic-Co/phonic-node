/**
 * This file was auto-generated by Fern from our API Definition.
 */

import * as Phonic from "../index.js";

export interface Conversation {
    /** The conversation ID. */
    id: string;
    /** The agent associated with the conversation. */
    agent?: Conversation.Agent;
    /** The organization/workspace name. */
    workspace: string;
    /** The project associated with the conversation. */
    project: Conversation.Project;
    /** External ID for conversation tracking. */
    external_id?: string;
    /** The STS model used. */
    model: string;
    /** Will be `true` if welcome message was automatically generated. */
    generate_welcome_message: boolean;
    /** Welcome message played at start. Will be `null` when `generate_welcome_message` is `true`. */
    welcome_message?: string;
    /** Template variables used in the conversation. */
    template_variables: Record<string, string>;
    /** Audio input format. */
    input_format: string;
    /** Audio output format. */
    output_format: string;
    /** Background noise level used in the conversation. */
    background_noise_level: number;
    /** The background noise type used in the conversation. */
    background_noise?: Conversation.BackgroundNoise;
    /** Live transcript of the conversation. */
    live_transcript: string;
    /** Post-call processed transcript. */
    post_call_transcript?: string;
    /** Duration of the conversation in milliseconds. */
    duration_ms: number;
    /** Presigned URL to the conversation audio file. Expires in 1 day. */
    audio_url?: string;
    /** When the conversation started. */
    started_at?: string;
    /** When the conversation ended. */
    ended_at?: string;
    /** Who or what ended the conversation. */
    ended_by?: Conversation.EndedBy;
    /** These words, or short phrases, are more accurately recognized by the model. */
    boosted_keywords?: string[];
    /** Array of ISO 639-1 language codes recognized by the model. */
    languages?: string[];
    /** Whether the no-input poke text was generated by AI. */
    generate_no_input_poke_text?: boolean;
    /** Number of seconds of silence before a poke message is sent. `null` means the poke message is disabled. */
    no_input_poke_sec?: number;
    /** The message to send after the specified silence. Relevant only if `no_input_poke_sec` is not `null`. Ignored when generate_no_input_poke_text is true. */
    no_input_poke_text?: string;
    /** Seconds of silence before the conversation is ended. */
    no_input_end_conversation_sec?: number;
    /** Results from conversation evaluations and extractions. */
    task_results: Record<string, unknown>;
    /** Array of conversation items (turns). */
    items: Phonic.ConversationItem[];
    /** Phone call metadata. `null` for non-phone call conversations. */
    call_info?: Conversation.CallInfo;
    /** Analysis of the conversation including latencies and interruptions. */
    analysis: Phonic.ConversationAnalysis;
}

export namespace Conversation {
    /**
     * The agent associated with the conversation.
     */
    export interface Agent {
        /** The ID of the agent. */
        id: string;
        /** The name of the agent. */
        name: string;
        /** Whether the agent has been deleted. */
        is_deleted: boolean;
    }

    /**
     * The project associated with the conversation.
     */
    export interface Project {
        /** The ID of the project. */
        id: string;
        /** The name of the project. */
        name: string;
    }

    /**
     * The background noise type used in the conversation.
     */
    export type BackgroundNoise = "office" | "call-center" | "coffee-shop";
    export const BackgroundNoise = {
        Office: "office",
        CallCenter: "call-center",
        CoffeeShop: "coffee-shop",
    } as const;
    /**
     * Who or what ended the conversation.
     */
    export type EndedBy = "user" | "user_canceled" | "user_validation_failed" | "assistant" | "error";
    export const EndedBy = {
        User: "user",
        UserCanceled: "user_canceled",
        UserValidationFailed: "user_validation_failed",
        Assistant: "assistant",
        Error: "error",
    } as const;

    /**
     * Phone call metadata. `null` for non-phone call conversations.
     */
    export interface CallInfo {
        /** Caller phone number in E.164 format. */
        from_phone_number: string;
        /** Callee phone number in E.164 format. */
        to_phone_number: string;
        /** Twilio Call SID. Only present for user SIP trunking calls. */
        twilio_call_sid?: string;
    }
}
